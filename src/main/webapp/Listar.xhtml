<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
	<title>Listar</title>
	<h:outputStylesheet library="estilos" name="estilo.css" />
</h:head>

<h:body>
	<header>
		<h:graphicImage library="estilos" name="logo.png" width="50" height="35" />
	</header>

	<h:form id="form">
		<h1>LISTAGEM</h1>
		
		<p:toolbar>
			<f:facet name="right">
				<p:inputText placeholder="Pesquise aqui" value="#{pesquisaBean.termoPesquisa}" />
				<p:commandButton value="Pesquisar" icon="fa fa fa-search" action="#{pesquisaBean.pesquisar}" update="tab"/>
				<span class="ui-separator">
					<span class="ui-icon ui-icon-grip-dotted-vertical" />
				</span>
			</f:facet>
		</p:toolbar>
		<p:tabView id="tab">
			<p:tab title="Alunos">
				<h:panelGrid columns="2">
					<p:dataTable value="#{alunoBean.alunos}" var="a" border="1"
						id="tabelaAluno" paginator="true" rows="5" paginatorPosition="bottom">
						<p:column headerText="Nome">
							<p:outputLabel value="#{a.nome}" />
						</p:column>
						<p:column headerText="Curso">
							<p:outputLabel value="#{a.curso}" />
						</p:column>
						<p:column headerText="Ações" width="25%">
							<p:commandButton value="Editar" icon="ui-icon-document"
								action="CadastroAluno?faces-redirect=true" update="@form"
								process="@this">
								<f:setPropertyActionListener value="#{a}"
									target="#{alunoBean.aluno}" />
							</p:commandButton>
							<p:commandButton action="#{alunoBean.excluir}" value="Deletar"
								icon="ui-icon-trash" update="tabelaAluno" process="@this">
								<f:setPropertyActionListener value="#{a}"
									target="#{alunoBean.aluno}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</h:panelGrid>
			</p:tab>

			<p:tab title="Orientadores">
				<h:panelGrid columns="2">
					<p:dataTable value="#{orientadorBean.orientadores}" var="o"
						border="1" id="tabelaOrientador" paginator="true" rows="5"
						paginatorPosition="bottom">
						<p:column headerText="Nome">
							<p:outputLabel value="#{o.nome}" />
						</p:column>
						<p:column headerText="Departamento">
							<p:outputLabel value="#{o.departamento}" />
						</p:column>
						<p:column headerText="Ações" width="25%">
							<p:commandButton value="Editar" icon="ui-icon-document"
								action="CadastrarOrientador?faces-redirect=true" update="@form"
								process="@this">
								<f:setPropertyActionListener value="#{o}"
									target="#{orientadorBean.orientador}" />
							</p:commandButton>
							<p:commandButton action="#{orientadorBean.excluir}"
								value="Deletar" icon="ui-icon-trash" update="tabelaOrientador"
								process="@this">
								<f:setPropertyActionListener value="#{o}"
									target="#{orientadorBean.orientador}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</h:panelGrid>
			</p:tab>

			<p:tab title="Empresa">
				<h:panelGrid columns="2">
					<p:dataTable value="#{empresaBean.empresas}" var="e" border="1"
						id="tabelaEmpresa" paginator="true" rows="5"
						paginatorPosition="bottom">
						<p:column headerText="Razão Social">
							<p:outputLabel value="#{e.nome}" />
						</p:column>
						<p:column headerText="Endereço">
							<p:outputLabel value="#{e.endereco}" />
						</p:column>
						<p:column headerText="Setor">
							<p:outputLabel value="#{e.setor}" />
						</p:column>
						<p:column headerText="Ações" width="25%">
							<p:commandButton value="Editar" icon="ui-icon-document"
								action="CadastrarOrientador?faces-redirect=true" update="@form"
								process="@this">
								<f:setPropertyActionListener value="#{e}"
									target="#{empresaBean.empresa}" />
							</p:commandButton>
							<p:commandButton action="#{empresaBean.excluir}" value="Deletar"
								icon="ui-icon-trash" update="tabelaEmpresa" process="@this">
								<f:setPropertyActionListener value="#{e}"
									target="#{empresaBean.empresa}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</h:panelGrid>
			</p:tab>
		</p:tabView>
		<p:commandButton value="Voltar" action="#{gestaoPaginasBean.voltar}"
			immediate="true" />
	</h:form>
</h:body>
</html>
